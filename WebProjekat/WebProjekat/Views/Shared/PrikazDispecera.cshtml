@model WebProjekat.Models.Dispecer
@{
    ViewBag.Title = "PrikazDispecera";
}

<div style="text-align:center">
    <h2>Vaši podaci</h2>
</div>

<html>
<body>
    <table style="background-color:cornsilk" border="1" align="center">
        <tr>
            <td>Korisničko ime:</td>
            <td><label>@Model.KorisnickoIme</label></td>
        </tr>
        <tr>
            <td>Ime:</td>
            <td><label>@Model.Ime</label></td>
        </tr>
        <tr>
            <td>Prezime:</td>
            <td><label>@Model.Prezime</label></td>
        </tr>
        <tr>
            <td>Jmbg:</td>
            <td><label>@Model.Jmbg</label></td>
        </tr>
        <tr>
            <td>Pol:</td>
            <td><label>@Model.Pol</label></td>
        </tr>
        <tr>
            <td>E-mail:</td>
            <td><label>@Model.Email</label></td>
        </tr>
        <tr>
            <td>Kontakt telefon:</td>
            <td><label>@Model.KontaktTelefon</label></td>
        </tr>
    </table>

    <table align="center">
        <tr>
            <td>
                <form action="/Dispecer/Izmena">
                    <input type="submit" value="Izmeni podatke" />
                </form>
            </td>
            <td>
                <form action="/Dispecer/Vozac">
                    <input type="submit" value="Dodaj vozača" />
                </form>
            </td>
            <td>
                <form action="/Dispecer/Voznja">
                    <input type="submit" value="Formiraj vožnju" />
                </form>
            </td>
            <td>
                <form action="/Dispecer/Odjava">
                    <input type="submit" value="Odjavi se" />
                </form>
            </td>
        </tr>
    </table>

    @if (Model.ListaVoznji.Count > 0)
    {
        <div>
            <h2>Vaše vožnje</h2>
        </div>

        <table border="1" style="background-color:cornsilk">

            @foreach (WebProjekat.Models.Voznja v in @Model.ListaVoznji)
            {
                int i = @Model.ListaVoznji.IndexOf(v) + 1;

                <tr>
                    <td colspan="2" align="center">VOŽNJA @i.ToString()</td>
                </tr>

                <tr>
                    <td>Datum i vreme porudžbine:</td>
                    <td><label>@v.DatumVremePorudzbine</label></td>
                </tr>

                <tr>
                    <td>Lokacija na koju taxi dolazi:</td>
                    <td><label>@v.LokacijaNaKojuTaxiDolazi.Adresa.Ulica @v.LokacijaNaKojuTaxiDolazi.Adresa.Broj @v.LokacijaNaKojuTaxiDolazi.Adresa.NaseljenoMesto</label></td>
                </tr>

                <tr>
                    <td>Status vožnje:</td>
                    <td><label>@v.StatusVoznje</label></td>
                </tr>

                <tr>
                    <td colspan="2" align="center">
                        <form action="/Dispecer/VoznjaInfo">
                            <input type="hidden" name="dispecer" value="@Model.KorisnickoIme" />
                            <input type="hidden" name="index" value="@i" />
                            <input type="submit" value="Prikaži sve informacije" />
                        </form>
                    </td>
                </tr>
                    if (v.StatusVoznje != WebProjekat.Models.Enums.StatusVoznje.NEUSPESNA)
                    {
                        if (v.StatusVoznje != WebProjekat.Models.Enums.StatusVoznje.USPESNA)
                        {
                            <tr>
                                <td colspan="2" align="center">
                                    <form action="/Dispecer/VoznjaObrada">
                                        <input type="hidden" name="dispecer" value="@Model.KorisnickoIme" />
                                        <input type="hidden" name="index" value="@i" />
                                        <input type="submit" value="Obradi vožnju" />
                                    </form>
                                </td>
                            </tr>
                        }
                    }                
        }
        </table>
    }

    @if (WebProjekat.Models.Korisnici.ListaSvihVoznji.Count > 0)
    {

        <div>
            <h2>Sve vožnje u sistemu</h2>
        </div>

        <table border="1" style="background-color:cornsilk">

            @foreach (WebProjekat.Models.Voznja v in WebProjekat.Models.Korisnici.ListaSvihVoznji)
            {
                int i = Model.ListaVoznji.IndexOf(v) + 1;

                <tr>
                    <td colspan="2" align="center">VOŽNJA @i.ToString()</td>
                </tr>

                <tr>
                    <td>Datum i vreme porudžbine:</td>
                    <td><label>@v.DatumVremePorudzbine</label></td>
                </tr>

                <tr>
                    <td>Lokacija na koju taxi dolazi:</td>
                    <td><label>@v.LokacijaNaKojuTaxiDolazi.Adresa.Ulica @v.LokacijaNaKojuTaxiDolazi.Adresa.Broj @v.LokacijaNaKojuTaxiDolazi.Adresa.NaseljenoMesto</label></td>
                </tr>

                <tr>
                    <td>Status vožnje:</td>
                    <td><label>@v.StatusVoznje</label></td>
                </tr>

                <tr>
                    <td colspan="2" align="center">
                        <form action="/Dispecer/SveVoznjeInfo">
                            <input type="hidden" name="index" value="@i" />
                            <input type="submit" value="Prikaži sve informacije" />
                        </form>
                    </td>
                </tr>
            }
        </table>
    }

</body>
</html>

